<h1>List of the vaults</h1>

<div name="vault_menu">
  <%= link_to "Create Vault", glacier_new_vault_path %>
  <%= link_to "Upload Archive", glacier_new_archive_path %>
</div>
<div name="list_of_vaults">
  <table class="responstable">
    <thead>
      <tr>
        <th>Vault Name</th>
        <th>Vault ARN</th>
        <th>Size</th>
        <th>Archives</th>
        <th>Created</th>
        <th>Last Inventory Date</th>
        <th colspan="3">Options</th>
      </tr>
    </thead>
    </tbody>
      <% @vaults_list.each do | describe_vault | %>
        <tr>
            <td><%= describe_vault.vault_name %></td>
            <td><%= describe_vault.vault_arn %></td>
            <td><%= describe_vault.size_in_bytes %></td>
            <td><%= describe_vault.number_of_archives %></td>
            <td><%= describe_vault.creation_date %></td>
            <td><%= describe_vault.last_inventory_date %></td>
            <td><%= link_to '4',
                        glacier_inventory_retrieval_path(describe_vault.vault_name),
                        { method: "get",
                          class: "action_link",
                            title: "Inventory",
                            data: { confirm: "Are you sure you want to start a inventory retrieval for the vault \"#{describe_vault.vault_name}\"?" }
                        }
                  %></td>
            <td title="Coming soon" class="action_link">!</td>
            <td><%= link_to 'รป',
                      glacier_destroy_vault_path(describe_vault.vault_name),
                      { method: "delete",
                        class: "action_link",
                        title: "Destroy",
                        data: { confirm: "Are you sure you want to destroy the vault \"#{describe_vault.vault_name}\"?" }
                      }
                  %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <h1> List of Jobs</h1>
  <div name="list_of_jobs">
    <table class="responstable">
      <thead>
        <th>ID</th>
        <th>Description</th>
        <th>Action</th>
        <th>Archive ID</th>
        <th>Vault ARN</th>
        <th>Creation</th>
        <th>Completed</th>
        <th>Status</th>
        <th>Status Message</th>
        <th>Arc Size</th>
        <th>Inv Size</th>
        <th>SNS</th>
        <th>Completion</th>
        <th>SHA 256</th>
        <th>Arc SHA 256</th>
        <th>Byte Range</th>
        <th>Format</th>
        <th>Start</th>
        <th>End</th>
        <th>Limit</th>
        <th>Marker</th>
        <th>Options</th>
      </thead>
      <tbody>
        <% @job_list.each do | job_description | %>
        <tr>
          <td><%= job_description.job_id %></td>
          <td><%= job_description.job_description %></td>
          <td><%= job_description.action  %></td>
          <td><%= job_description.archive_id %></td>
          <td><%= job_description.vault_arn %></td>
          <td><%= job_description.creation_date %></td>
          <td><%= job_description.completed %></td>
          <td><%= job_description.status_code %></td>
          <td><%= job_description.status_message %></td>
          <td><%= job_description.archive_size_in_bytes %></td>
          <td><%= job_description.inventory_size_in_bytes %></td>
          <td><%= job_description.sns_topic %></td>
          <td><%= job_description.completion_date %></td>
          <td><%= job_description.sha256_tree_hash %></td>
          <td><%= job_description.archive_sha256_tree_hash %></td>
          <td><%= job_description.retrieval_byte_range %></td>
          <td><%= job_description.inventory_retrieval_parameters.format %></td>
          <td><%= job_description.inventory_retrieval_parameters.start_date %></td>
          <td><%= job_description.inventory_retrieval_parameters.end_date %></td>
          <td><%= job_description.inventory_retrieval_parameters.limit %></td>
          <td><%= job_description.inventory_retrieval_parameters.marker %></td>
          <td><%= link_to "ร",
                    glacier_inventory_download_path(id: job_description.job_id, vault: job_description.vault_arn),
                    { method: "get",
                      class: "action_link",
                      title: "Download",
                      data: { confirm: "Are you sure you want to download the inventory?" }
                    }
              %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
